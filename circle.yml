general:
  artifacts:
    - /home/ubuntu/github_test/app/build/outputs/apk/app-release-unsigned.apk

machine:
    java:
        version: openjdk7
    environment:
        ANDROID_HOME: /usr/local/android-sdk-linux
        JAVA_OPTS: "-Xmx2048m -XX:MaxPermSize=1024m"

dependencies:
  override:
  - echo y | android update sdk --no-ui --all --filter android-23,build-tools-23.0.0
  - echo y | android update lib-project --path ./appcompat --target android-23
  - echo y | android update project --path ./core --library ../appcompat --target android-23

test:
    override:
      - echo "Nothing to do here"

deployment:
  master:
    branch: master
    commands:
      - ./gradlew assemble
      - ./gradlew crashlyticsUploadDistributionDebug crashlyticsUploadDistributionRelease
